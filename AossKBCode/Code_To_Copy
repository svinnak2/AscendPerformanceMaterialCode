import networkx as nx
import matplotlib.pyplot as plt
from networkx.drawing.nx_pydot import graphviz_layout

relationships = [
    ("Alice", "knows", "Bob"),
    ("Bob", "works at", "Google"),
    ("Alice", "studied at", "MIT"),
    ("Google", "acquired", "DeepMind"),
    ("DeepMind", "has lab", "London")  # add more to test overlap
]

G = nx.DiGraph()

for source, relation, target in relationships:
    G.add_edge(source, target, label=relation)

# ✅ Control layout and spacing
G.graph['graph'] = {
    'rankdir': 'LR',
    'nodesep': '1.0',
    'ranksep': '1.2'
}

pos = graphviz_layout(G, prog="dot")

# ✅ Draw graph with adjustments
plt.figure(figsize=(18, 8))  # More canvas space
nx.draw(
    G, pos, with_labels=True,
    node_color="lightblue", edge_color="gray",
    node_size=2500, font_size=9, arrows=True
)

# ✅ Edge labels
edge_labels = {(u, v): d['label'] for u, v, d in G.edges(data=True)}
nx.draw_networkx_edge_labels(
    G, pos, edge_labels=edge_labels,
    font_color="red", font_size=8
)

plt.title("Clean Horizontal Network Layout", fontsize=14)
plt.axis("off")
plt.tight_layout()
plt.show()
