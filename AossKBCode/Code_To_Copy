import networkx as nx
import matplotlib.pyplot as plt
from networkx.drawing.nx_pydot import graphviz_layout

# Sample relationships
relationships = [
    ("Alice", "knows", "Bob"),
    ("Bob", "works at", "Google"),
    ("Alice", "studied at", "MIT"),
    ("Google", "acquired", "DeepMind")
]

# ✅ Create a directed graph
G = nx.DiGraph()

# ✅ Add edges with labels
for source, relation, target in relationships:
    G.add_edge(source, target, label=relation)

# ✅ Use Graphviz layout (pydot backend), default top-down
# Note: pydot's `graphviz_layout` does not support 'args', so rankdir is controlled by setting graph attributes
G.graph['graph'] = {'rankdir': 'LR'}  # this sets left-to-right layout in DOT

# ✅ Generate layout
pos = graphviz_layout(G, prog="dot")

# ✅ Draw the graph
plt.figure(figsize=(12, 6))
nx.draw(G, pos, with_labels=True, node_color="lightblue", edge_color="gray",
        node_size=2000, font_size=10, arrows=True)

# ✅ Draw edge labels
edge_labels = {(u, v): d['label'] for u, v, d in G.edges(data=True)}
nx.draw_networkx_edge_labels(G, pos, edge_labels=edge_labels, font_color="red", font_size=9)

plt.title("Left-to-Right Relationship Graph (using pydot)")
plt.axis("off")
plt.tight_layout()
plt.show()
